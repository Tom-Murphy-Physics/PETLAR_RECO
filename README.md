# PETLAR_RECO

## What it does
This code is intented to simulate the reconstruction process for the PETLAr experiment.
In PET, two back to back photons are detected with a cylindrical detector.
A line is then drawn between the two of detected photons.
This line called a "line of response" (LOR)


Tradionally, a 3D image is generated by slowly passing the patient through a ring and producing several slices of the patient.
This means many different sets of LOR are needed. This program takes a different approach. 

A LOR is then converted into a new coordinate system to store its information. 
A point is taken as the origin, then the shortest distance from the origin to the line is taken.
This distance forms the first coordinate. 
The second coordinate is the angle of the LOR from the horizantal axis. 

This is done for each set of LORs. To reduce any ambiguties, the data from each LOR is grouped into projections.
XY, YZ, XZ are used. 

Once the LOR are converted to the new coordinates, we need to reconstruct the image.
This is done using an "inverse radon transform". This code uses a pre-defined library to accomplish this. 

This will give us 3, 2D projections of the reconstructed images in the XY, YZ, and XZ planes. 
From here, a simple algorithim converts these projections into a 3D image. 
This is done by extending each 2D projection into 3D space. 
Then a filter is applied to try and extract the real positions. 
Currently this has shown mixed success and seems to be affected by the resolution of the reconstruction. 
With high statistics, it usually returns a fairly accurate result.
These data points are then converted into an .stl file.
This .stl file can then be viewed in your favorite CAD software.
